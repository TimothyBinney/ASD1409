// Code for HTTP Client Setup and Function Calls

var link = "http://api.reddit.com/r/food";

var responded = function(){
	var web = JSON.parse(this.responseText);
	var article = web.data.children;
	for(var i=0, j=article.length; i<j; i++){
		var header = article[i].data.title;
		var pic = article[i].data.url;
		var row = Ti.UI.createView({
			backgroundColor: "white",
			height: Ti.UI.SIZE,
			thePic: pic,
		});
		var label = Ti.UI.createLabel({
			text:header,
			color: "black",
			height: "auto",
			thePic: pic,
		});
		row.add(label);
		scroller.add(row);
	}
	
};

var getImage = function(e){
	var newWindow = Ti.UI.createWindow({
		backgroundColor: "white",
	});
	var picture = Ti.UI.createImageView({
		image: e.source.pic,
	});
	newWindow.add(picture);
	newWindow.addEventListener("click", function(){
		this.close();
	});
	newWindow.open();
};

scroll.addEventListener("click", getImage);

var respondFail = function(e){
	alert(e.error);
	console.log(e);
};
